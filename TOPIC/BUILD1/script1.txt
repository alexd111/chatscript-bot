00004 Mar09'17-15:39:40 housy 7.2
TOPIC: ~control 0x19 1875942720 10 0 1875 simplecontrol.top
" all " 00! u: ( =8%input<%userfirstline ) ^gambit ( ~introductions ) `00A u: ( < shut_up > ) $shutup = 1 `00A u: ( < talk > ) $shutup = null `00G u: ( \[ callback \] ) Callback seen. `00G u: ( \[ loopback \] ) Loopback seen. `00A u: ( \[ alarm \] ) Alarm seen. `00^ u: ( < loopback test ) \[ loopback=1000 \] Loopback requested. `00^ u: ( < callback test ) \[ callback=1000 \] Callback requested. `00X u: ( < alarm test ) \[ alarm=5000 \] Alarm requested. `0iZ u: ( ) $$currenttopic = %topic ^if 00m( %response == 0 ) 00I{ ^nofail ( TOPIC ^rejoinder ( ) ) } 004 ^if 00D( %length == 0 and %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 00V{ ^nofail ( TOPIC ^respond ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02r{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01S { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^respond ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00T{ ^nofail ( TOPIC ^respond ( ~keywordless ) ) } 004 ^if 00B( %response == 0 and %rand > 50 ) 00T{ ^nofail ( TOPIC ^respond ( ~quibble_all ) ) } 004 ^if 00F( %outputrejoinder or %lastquestion ) 00q{ ^end ( TOPIC ) } 004 ^if 00R( %response == 0 and ^marked ( $$currenttopic ) ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02q{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01R { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02o{ @8 = ^gambittopics ( ) ^loop ( -1 ) 01Q { $$topic = ^pick ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00N{ ^repeat ( ) I don't know what to say. } 004 `000 
TOPIC: ~xpostprocess 0x19 -2048403277 1 1 232 simplecontrol.top
" all " 02^ t: ( ^query ( direct_v ? chatoutput ? -1 ? @9 ) ) ^loop ( -1 ) 020 { $$tmp = ^last ( @9subject ) ^if 00O( ! %server and %os == windows and ! $shutup ) 00Y{ $$tmp = ^"talk \"$$tmp\" " ^popen ( $$tmp null ) } 004 } `000 
TOPIC: ~questions 0x0 1471376243 2 1 133 questions.top
" all " 010 t:  Hi, I will help you find a place to live!. ^respond ( ~question ) `00I u: 9DEFAULT ( ) ^respond ( ~question ) `000 
TOPIC: ~question 0x13 -1548659756 7 0 1493 questions.top
" all " ( $_size ) 00^ u: ( !$city ) Hello I am Housy. Which city are you looking in? `00u a: ( in _* ) $city = '_0 `00O a: ( _* ) $city = '_0 ^respond ( ~question ) `01h u: ( !$bedrooms ) Ok you are looking in $city . How many bedrooms are you looking for? `00I a: ( _~number bedroom ) $bedrooms = _0 `00A a: ( _~number ) $bedrooms = _0 `01y u: ( !$price ) OK, you want $bedrooms bedrooms. What is the max price per month you are willing to pay? `00D a: ( * _~number per ) $price = _0 `00x a: ( _~number ) $price = _0 `00w a: ( _~money ) $price = _0 `01c u: ( !$bills ) Your max price is $price per month. Would you like bills included? `00s a: ( ~yes ) $bills = 1 `00r a: ( ~no ) $bills = 0 `00~ u: ( !$furnished ) And would you like a furnished place? `00w a: ( ~yes ) $furnished = 1 `00v a: ( ~no ) $furnished = 0 `06n u: ( $city $bedrooms $price $bills $furnished !$view ) You are looking for a $bedrooms bedroom house in $city . Your budget is $price . $url = ^join ( http://127.0.0.1:5000/accommodation/ $city / ) $url = ^join ( $url $bedrooms / ) $url = ^join ( $url $price / ) $url = ^join ( $url $furnished / ) $url = ^join ( $url $bills ) $json = ^jsonparse ( ^jsonopen ( GET $url ) ) $_size = ^length ( $json ) I have found $_size houses for you. Would you like to view them? \n `00r a: ( ~yes ) $view = 1 `00q a: ( ~no ) $view = 0 `01% u: ( $city $bedrooms $price $bills $furnished $view ) $json2 = ^jsonparse ( ^jsonopen ( GET $url ) ) JSONSTRING ^jsonwrite ( $json2 ) \n `000 
